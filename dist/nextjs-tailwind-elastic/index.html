<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/png" href="/thumbnails/favicon.png"><meta name="generator" content="Astro v4.16.19"><title>Creating a search engine app with Next.js, TailwindCSS - Aravind Putrevu</title><meta name="description" content="Creating a search engine app with Next.js, TailwindCSS"><link rel="sitemap" href="/sitemap-index.xml"><!-- Open Graph / Social Media --><meta property="og:title" content="Creating a search engine app with Next.js, TailwindCSS - Aravind Putrevu"><meta property="og:description" content="Creating a search engine app with Next.js, TailwindCSS"><meta property="og:type" content="website"><!-- Twitter Card --><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@aravindputrevu"><meta name="twitter:title" content="Creating a search engine app with Next.js, TailwindCSS - Aravind Putrevu"><meta name="twitter:description" content="Creating a search engine app with Next.js, TailwindCSS"><link rel="stylesheet" href="/_astro/_slug_.DRsGrASp.css">
<style>.article-header[data-astro-cid-fzx4jmue]{margin-bottom:2rem;padding-bottom:1rem;border-bottom:2px solid #eee}.article-header[data-astro-cid-fzx4jmue] h1[data-astro-cid-fzx4jmue]{margin-bottom:.5rem}.article-header[data-astro-cid-fzx4jmue] time[data-astro-cid-fzx4jmue]{color:#666;font-size:.9rem}.tags[data-astro-cid-fzx4jmue]{display:flex;gap:.5rem;margin-top:1rem;flex-wrap:wrap}.tag[data-astro-cid-fzx4jmue]{background:#f0f0f0;padding:.25rem .75rem;border-radius:3px;font-size:.85rem}.post-content[data-astro-cid-fzx4jmue]{line-height:1.8}
</style><script type="module">const d=localStorage.getItem("theme");d==="dark"&&document.documentElement.classList.add("dark");const e=document.getElementById("dark-mode-button"),o=localStorage.getItem("theme");o==="dark"&&(document.documentElement.classList.add("dark"),e&&(e.textContent="‚óã"));e?.addEventListener("click",()=>{if(document.documentElement.classList.contains("dark"))document.documentElement.classList.remove("dark"),localStorage.removeItem("theme"),document.querySelector("#dark-mode")?.remove(),e.textContent="‚óè";else{document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"),e.textContent="‚óã";const n=document.getElementsByTagName("head")[0],t=document.createElement("link");t.rel="stylesheet",t.id="dark-mode",t.href="/dark.css",n.appendChild(t)}});
</script></head> <body> <nav class="navbar" data-astro-cid-eqd27vgs> <div class="container" data-astro-cid-eqd27vgs> <div class="flex" data-astro-cid-eqd27vgs> <div data-astro-cid-eqd27vgs> <a href="/" class="brand" data-astro-cid-eqd27vgs>
Aravind Putrevu
</a> </div> <div class="flex nav-links" data-astro-cid-eqd27vgs> <a href="/blog" data-astro-cid-eqd27vgs>Writing</a> <a href="/archive" data-astro-cid-eqd27vgs>Archive</a> <a href="/about" data-astro-cid-eqd27vgs>About</a> <button id="dark-mode-button" aria-label="Toggle dark mode" data-astro-cid-eqd27vgs>‚óè</button> </div> </div> </div> </nav>   <main>  <article class="container" data-astro-cid-fzx4jmue> <header class="article-header" data-astro-cid-fzx4jmue> <h1 data-astro-cid-fzx4jmue>Creating a search engine app with Next.js, TailwindCSS</h1> <time data-astro-cid-fzx4jmue>November 10, 2021</time> <div class="tags" data-astro-cid-fzx4jmue> <span class="tag" data-astro-cid-fzx4jmue>search engine</span><span class="tag" data-astro-cid-fzx4jmue>reactjs</span><span class="tag" data-astro-cid-fzx4jmue>nextjs</span><span class="tag" data-astro-cid-fzx4jmue>tailwindcss</span><span class="tag" data-astro-cid-fzx4jmue>elasticsearch</span> </div> </header> <div class="post-content" data-astro-cid-fzx4jmue> <p>In this tutorial, we will build a simple search engine using <a href="elastic.co/elasticsearch">Elasticsearch</a>, <a href="https://nextjs.org/">Next.js</a>, and <a href="https://tailwindcss.com/">TailwindCSS</a>.</p>
<p>I want to build a search engine with React-based application and frankly window-shopped a lot of JS frameworks, finally settling on <em>Next.js</em>.</p>
<p>Initially, I thought of using a CSS framework like <a href="https://picturepan2.github.io/spectre/">Spectre</a>. But then I want to give <em>tailwindcss</em> a shot. It turned out to be impressive, and I gained a new skill.</p>
<p>As a backend dev with a Java/GoLang background, someone who worked on <a href="https://docs.oracle.com/javaee/5/tutorial/doc/bnblt.html">EJB‚Äôs</a> üòÉ it feels super cool to create beautiful user interfaces.</p>
<p><img src="/images/post-images/nextjs-tailwind-elastic/nextjs-tailwindcss-es-arch.png" alt="High level architecture"></p>
<h2 id="installing-and-configuring-nextjs-tailwindcss">Installing and configuring Next.js, TailwindCSS</h2>
<p>We will be using below git repo throughout the guide. It has numbered branches for you to follow. Names indicate the code/feature in that branch. Run <code>npm install</code> to install all dependencies, including
Next.js.</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#88C0D0">git</span><span style="color:#A3BE8C"> clone</span><span style="color:#A3BE8C"> https://github.com/aravindputrevu/nextjs-tailwindcss-search.git</span></span>
<span class="line"><span style="color:#88C0D0">git</span><span style="color:#A3BE8C"> switch</span><span style="color:#A3BE8C"> 1-initial</span></span>
<span class="line"></span></code></pre>
<blockquote>
<p><strong>Note:</strong> Nodejs and NPM need are prerequisites, you can install them from here. You can the version of nextjs installed with <code>npx next -v</code>.</p>
</blockquote>
<h3 id="nextjs">NextJS</h3>
<p>NextJS is a framework built on top of <a href="https://reactjs.org/">ReactJS</a>, another popular framework for writing Javascript-based web applications. To understand more about Next.js and its features, please refer to <a href="https://nextjs.org/docs/getting-started">Next.js documentation</a>. It is exhaustive and has excellent developer experience.</p>
<h3 id="tailwindcss">TailwindCSS</h3>
<p>If you have checked out the <code>package.json</code> in the repo above, it comes with the dev dependency - tailwindcss. TailwindCSS is a utility-first CSS framework, which helps you to build responsive UI experiences.</p>
<p>In simple terms, you don‚Äôt need to write a CSS classes or customize them. Instead you choose it from a set of pre-defined CSS classes from TailwindCSS. You might be wondering, how much Tailwindcss can be of your help, you can customize tailwindcss to adapt to your own brand.</p>
<p><img src="/images/post-images/nextjs-tailwind-elastic/tailwindcss-intro.png" alt="Introduction to Tailwindcss"></p>
<p>That being said, the framework is big and you would need the help of other libraries like postcss to remove those classes which are not used and generate a CSS file which is only used by your app.</p>
<p>I‚Äôm using the latest Just-in-time (JIT) compilation mode of TailwindCSS which eliminates the postcss step.</p>
<p>Want to read more? Refer tailwindcss documentation on adding <a href="https://tailwindcss.com/docs/guides/nextjs">Tailwindcss to Next.js</a>.</p>
<h3 id="hello-world">Hello, world!</h3>
<p>I hope you are in the <code>1-initial</code> branch of git repository. Do switch to below branch get started!</p>
<p>Run the below command to see the app at <a href="http://localhost:3000">http://localhost:3000</a></p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#88C0D0">npm</span><span style="color:#A3BE8C"> run</span><span style="color:#A3BE8C"> dev</span></span>
<span class="line"></span></code></pre>
<p><img src="/images/post-images/nextjs-tailwind-elastic/hello-world.png" alt="Hello World!"></p>
<blockquote>
<p>Note:  To generate a production build, run <code>npm run build</code> and <code>npm run start</code>.</p>
</blockquote>
<h2 id="creating-and-connecting-to-an-elasticsearch-cluster">Creating and connecting to an Elasticsearch Cluster</h2>
<p>To ingest data and search, we need to create an Elasticsearch cluster. You could download and run <a href="https://elastic.co/downloads/elasticsearch/">Elasticsearch directly</a> as it is a free and open distributed search engine, analytics store.</p>
<p>We will be using <a href="https://elastic.co/cloud">Elastic Cloud</a> here as a backend. First, create a <a href="https://cloud.elastic.co/registration">free Elastic Cloud Account</a> -> spin up Elastic Stack Deployment. For more information, refer to my <a href="https://aravind.dev/elastic-cloud-apm">guide with screenshots</a> on account creation.</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#88C0D0">git</span><span style="color:#A3BE8C"> switch</span><span style="color:#A3BE8C"> 2-connect-es</span></span>
<span class="line"></span></code></pre>
<p>To communicate with Elasticsearch via a Next.js app, you can use a language client which wraps all the APIs in the respective programming language. Elastic has language clients for most of the <a href="https://www.elastic.co/guide/en/elasticsearch/client/index.html">programming languages</a>.</p>
<p>In the <code>lib</code> folder, I‚Äôm adding a file named <code>elasticsearch.js</code> which will import the necessary dependency.</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#81A1C1">import</span><span style="color:#ECEFF4"> {</span><span style="color:#8FBCBB"> Client</span><span style="color:#ECEFF4"> }</span><span style="color:#81A1C1"> from</span><span style="color:#ECEFF4"> '</span><span style="color:#A3BE8C">@elastic/elasticsearch</span><span style="color:#ECEFF4">'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">export</span><span style="color:#81A1C1"> async</span><span style="color:#81A1C1"> function</span><span style="color:#88C0D0"> connectToElasticsearch</span><span style="color:#ECEFF4">()</span><span style="color:#ECEFF4"> {</span><span style="color:#D8DEE9FF"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">    const</span><span style="color:#D8DEE9"> ESS_CLOUD_ID</span><span style="color:#81A1C1"> =</span><span style="color:#D8DEE9"> process</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">env</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">ESS_CLOUD_ID</span></span>
<span class="line"><span style="color:#81A1C1">    const</span><span style="color:#D8DEE9"> ESS_CLOUD_USERNAME</span><span style="color:#81A1C1"> =</span><span style="color:#D8DEE9"> process</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">env</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">ESS_CLOUD_USERNAME</span></span>
<span class="line"><span style="color:#81A1C1">    const</span><span style="color:#D8DEE9"> ESS_CLOUD_PASSWORD</span><span style="color:#81A1C1"> =</span><span style="color:#D8DEE9"> process</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">env</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">ESS_CLOUD_PASSWORD</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">    if</span><span style="color:#D8DEE9FF"> (</span><span style="color:#81A1C1">!</span><span style="color:#D8DEE9">ESS_CLOUD_ID</span><span style="color:#81A1C1"> ||</span><span style="color:#81A1C1"> !</span><span style="color:#D8DEE9">ESS_CLOUD_USERNAME</span><span style="color:#81A1C1"> ||</span><span style="color:#81A1C1"> !</span><span style="color:#D8DEE9">ESS_CLOUD_PASSWORD</span><span style="color:#D8DEE9FF">)</span></span>
<span class="line"><span style="color:#ECEFF4">    {</span></span>
<span class="line"><span style="color:#81A1C1">        return</span><span style="color:#ECEFF4"> "</span><span style="color:#A3BE8C">ERR_ENV_NOT_DEFINED</span><span style="color:#ECEFF4">"</span></span>
<span class="line"><span style="color:#ECEFF4">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">    return</span><span style="color:#81A1C1"> new</span><span style="color:#88C0D0"> Client</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#88C0D0">        cloud</span><span style="color:#ECEFF4">:</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#88C0D0">            id</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9"> ESS_CLOUD_ID</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#ECEFF4">        },</span></span>
<span class="line"><span style="color:#88C0D0">        auth</span><span style="color:#ECEFF4">:</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#88C0D0">            username</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9"> ESS_CLOUD_USERNAME</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#88C0D0">            password</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9"> ESS_CLOUD_PASSWORD</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#ECEFF4">        }</span></span>
<span class="line"><span style="color:#ECEFF4">    }</span><span style="color:#D8DEE9FF">)</span></span>
<span class="line"><span style="color:#ECEFF4">}</span></span>
<span class="line"></span></code></pre>
<blockquote>
<p><strong>Note:</strong> You need to configure the ESS_CLOUD_ID, ESS_CLOUD_USERNAME, ESS_CLOUD_PASSWORD in the <code>.env.local</code> file. A sample is present in the repo as <code>.env.local.example</code>.</p>
</blockquote>
<p>You might think that Next.js is a frontend framework, but it can also work as a backend for your APIs. Let us test the connection using a sample API <code>hello.js</code> in the <code>api</code> folder.</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#81A1C1">import</span><span style="color:#ECEFF4"> {</span><span style="color:#8FBCBB"> connectToElasticsearch</span><span style="color:#ECEFF4"> }</span><span style="color:#81A1C1"> from</span><span style="color:#ECEFF4"> "</span><span style="color:#A3BE8C">../../lib/elasticsearch</span><span style="color:#ECEFF4">"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">export</span><span style="color:#81A1C1"> default</span><span style="color:#81A1C1"> async</span><span style="color:#81A1C1"> function</span><span style="color:#88C0D0"> hello</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">req</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9"> res</span><span style="color:#ECEFF4">)</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#81A1C1">    const</span><span style="color:#D8DEE9"> client</span><span style="color:#81A1C1"> =</span><span style="color:#81A1C1"> await</span><span style="color:#88C0D0"> connectToElasticsearch</span><span style="color:#D8DEE9FF">()</span></span>
<span class="line"><span style="color:#81A1C1">    const</span><span style="color:#ECEFF4"> {</span><span style="color:#D8DEE9"> body</span><span style="color:#ECEFF4"> }</span><span style="color:#81A1C1"> =</span><span style="color:#81A1C1"> await</span><span style="color:#D8DEE9"> client</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">info</span><span style="color:#D8DEE9FF">()</span></span>
<span class="line"><span style="color:#D8DEE9">    res</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">status</span><span style="color:#D8DEE9FF">(</span><span style="color:#B48EAD">200</span><span style="color:#D8DEE9FF">)</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">json</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9">body</span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">)</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span></span>
<span class="line"><span style="color:#ECEFF4">  }</span></span>
<span class="line"></span></code></pre>
<p>Run the below command to query the API at <a href="http://localhost:3000/api/hello">http://localhost:3000/api/hello</a></p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#88C0D0">npm</span><span style="color:#A3BE8C"> run</span><span style="color:#A3BE8C"> dev</span></span>
<span class="line"></span></code></pre>
<p><img src="/images/post-images/nextjs-tailwind-elastic/hello-api.png" alt="Connect to Elastisearch"></p>
<h2 id="creating-nextjs-pages-api-routes-ingesting-data">Creating Next.js pages, API routes, Ingesting Data</h2>
<p>In this step, we will create an <code>ingest</code> page and a API route. But, first, let us switch to the <code>3-pages</code> branch using the below command.</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#88C0D0">git</span><span style="color:#A3BE8C"> switch</span><span style="color:#A3BE8C"> 3-pages</span></span>
<span class="line"></span></code></pre>
<p>Notice that we have two new files, <code>ingestData.js</code> and <code>search.js</code> under the <code>api</code> folder and <code>ingest.js</code> file directly under the <code>pages</code> folder. It is so simple and easy to create pages and API routes on Next.js.</p>
<p>Now, if you run the <code>npm run dev</code>,  you can see the page accessible at <code>http://localhost:3000/ingest</code>.</p>
<p><img src="/images/post-images/nextjs-tailwind-elastic/ingest-data-es.png" alt="Ingest data into Elasticsearch"></p>
<p>Hit that <code>ingest</code> button to ingest the sample data. We will be ingesting <code>5000</code> documents from a movie JSON dataset into Elasticsearch using the <code>_bulk</code> API.  We are calling <code>ingestData</code> API in the app to trigger the below code.</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#81A1C1"> default</span><span style="color:#81A1C1"> async</span><span style="color:#81A1C1"> function</span><span style="color:#88C0D0"> ingestData</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">req</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9"> res</span><span style="color:#ECEFF4">)</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#D8DEE9FF">  </span></span>
<span class="line"><span style="color:#81A1C1">    const</span><span style="color:#D8DEE9"> split</span><span style="color:#81A1C1"> =</span><span style="color:#88C0D0"> require</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">'</span><span style="color:#A3BE8C">split2</span><span style="color:#ECEFF4">'</span><span style="color:#D8DEE9FF">)</span></span>
<span class="line"><span style="color:#81A1C1">    const</span><span style="color:#D8DEE9"> client</span><span style="color:#81A1C1"> =</span><span style="color:#81A1C1"> await</span><span style="color:#88C0D0"> connectToElasticsearch</span><span style="color:#D8DEE9FF">()</span></span>
<span class="line"><span style="color:#81A1C1">    await</span><span style="color:#D8DEE9"> client</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">helpers</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">bulk</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#88C0D0">        datasource</span><span style="color:#ECEFF4">:</span><span style="color:#88C0D0"> createReadStream</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">'</span><span style="color:#A3BE8C">./movies.json</span><span style="color:#ECEFF4">'</span><span style="color:#D8DEE9FF">)</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">pipe</span><span style="color:#D8DEE9FF">(</span><span style="color:#88C0D0">split</span><span style="color:#D8DEE9FF">())</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#88C0D0">        onDocument</span><span style="color:#ECEFF4"> (</span><span style="color:#D8DEE9">doc</span><span style="color:#ECEFF4">)</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#81A1C1">          return</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#88C0D0">            index</span><span style="color:#ECEFF4">:</span><span style="color:#ECEFF4"> {</span><span style="color:#88C0D0"> _index</span><span style="color:#ECEFF4">:</span><span style="color:#ECEFF4"> '</span><span style="color:#A3BE8C">my-index</span><span style="color:#ECEFF4">'</span><span style="color:#ECEFF4"> }</span></span>
<span class="line"><span style="color:#ECEFF4">          }</span></span>
<span class="line"><span style="color:#ECEFF4">        },</span></span>
<span class="line"><span style="color:#88C0D0">        onDrop</span><span style="color:#ECEFF4"> (</span><span style="color:#D8DEE9">doc</span><span style="color:#ECEFF4">)</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#D8DEE9">            console</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">log</span><span style="color:#D8DEE9FF">(</span><span style="color:#D8DEE9">doc</span><span style="color:#D8DEE9FF">)</span></span>
<span class="line"><span style="color:#ECEFF4">          }</span></span>
<span class="line"><span style="color:#ECEFF4">      }</span><span style="color:#D8DEE9FF">)</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span></span>
<span class="line"><span style="color:#D8DEE9">    res</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">redirect</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">'</span><span style="color:#A3BE8C">/ingest</span><span style="color:#ECEFF4">'</span><span style="color:#D8DEE9FF">)</span></span>
<span class="line"><span style="color:#D8DEE9FF">    </span></span>
<span class="line"><span style="color:#ECEFF4">  }</span></span>
<span class="line"></span></code></pre>
<p><img src="/images/post-images/nextjs-tailwind-elastic/data-ingested-es.png" alt="Data Ingested into Elasticsearch"></p>
<blockquote>
<p><strong>Note:</strong> <code>movies.json</code> is already available in the checked-out repo.</p>
</blockquote>
<h2 id="creating-a-search-ui">Creating a Search UI</h2>
<p>In the final step, we will create a search box that takes our query and searches across the movie dataset.</p>
<p>Let us take a look at the search API through which we will query the data.</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#81A1C1">export</span><span style="color:#81A1C1"> default</span><span style="color:#81A1C1"> async</span><span style="color:#81A1C1"> function</span><span style="color:#88C0D0"> search</span><span style="color:#ECEFF4">(</span><span style="color:#D8DEE9">req</span><span style="color:#ECEFF4">,</span><span style="color:#D8DEE9"> res</span><span style="color:#ECEFF4">)</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1">    const</span><span style="color:#D8DEE9"> client</span><span style="color:#81A1C1"> =</span><span style="color:#81A1C1"> await</span><span style="color:#88C0D0"> connectToElasticsearch</span><span style="color:#D8DEE9FF">()</span></span>
<span class="line"><span style="color:#81A1C1">    const</span><span style="color:#D8DEE9"> query</span><span style="color:#81A1C1"> =</span><span style="color:#D8DEE9"> req</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">body</span></span>
<span class="line"><span style="color:#81A1C1">    const</span><span style="color:#ECEFF4"> {</span><span style="color:#D8DEE9"> body</span><span style="color:#ECEFF4"> }</span><span style="color:#81A1C1"> =</span><span style="color:#81A1C1"> await</span><span style="color:#D8DEE9"> client</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">search</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">{</span></span>
<span class="line"><span style="color:#88C0D0">    index</span><span style="color:#ECEFF4">:</span><span style="color:#ECEFF4"> '</span><span style="color:#A3BE8C">my-index</span><span style="color:#ECEFF4">'</span><span style="color:#ECEFF4">,</span></span>
<span class="line"><span style="color:#88C0D0">    body</span><span style="color:#ECEFF4">:</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#88C0D0">        query</span><span style="color:#ECEFF4">:</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#88C0D0">            match</span><span style="color:#ECEFF4">:</span><span style="color:#ECEFF4"> {</span></span>
<span class="line"><span style="color:#88C0D0">            title</span><span style="color:#ECEFF4">:</span><span style="color:#D8DEE9"> query</span></span>
<span class="line"><span style="color:#ECEFF4">            }</span></span>
<span class="line"><span style="color:#ECEFF4">        }</span></span>
<span class="line"><span style="color:#ECEFF4">    }</span></span>
<span class="line"><span style="color:#ECEFF4">    }</span><span style="color:#D8DEE9FF">)</span></span>
<span class="line"><span style="color:#81A1C1">    let</span><span style="color:#D8DEE9"> searchResults</span><span style="color:#81A1C1"> =</span><span style="color:#D8DEE9"> body</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">hits</span><span style="color:#ECEFF4">.</span><span style="color:#D8DEE9">hits</span></span>
<span class="line"><span style="color:#D8DEE9">    res</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">status</span><span style="color:#D8DEE9FF">(</span><span style="color:#B48EAD">200</span><span style="color:#D8DEE9FF">)</span><span style="color:#ECEFF4">.</span><span style="color:#88C0D0">json</span><span style="color:#D8DEE9FF">(</span><span style="color:#ECEFF4">{</span><span style="color:#D8DEE9">searchResults</span><span style="color:#ECEFF4">}</span><span style="color:#D8DEE9FF">)</span></span>
<span class="line"><span style="color:#ECEFF4">  }</span></span>
<span class="line"></span></code></pre>
<p>We are using a simple Elasticsearch match query here. Depending on your use case, you could replace that with your choice (<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query-phrase.html">match_phrase</a>, <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-term-query.html">term</a>, etc.) depending on your use case. To read more about <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html">QueryDSL</a>, do refer to the official documentation of Elasticsearch.</p>
<p>Switch to the below branch to see the final codebase, where we have a <code>search.js</code> page with a search bar UI to search across all the movies.</p>
<pre class="astro-code nord" style="background-color:#2e3440ff;color:#d8dee9ff; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#88C0D0">git</span><span style="color:#A3BE8C"> switch</span><span style="color:#A3BE8C"> 4-search-ui</span></span>
<span class="line"></span></code></pre>
<p><img src="/images/post-images/nextjs-tailwind-elastic/search-ui.png" alt="Search the data in Elasticsearch"></p>
<h2 id="conclusion">Conclusion</h2>
<p>It felt so simple for me to kick start an app in Next.js, use tailwindCSS, connect to Elasticsearch and finally begin searching. It can easily be deployed on to any cloud platform service like App Engine or App Service.</p>
<p>We could extend this further by adding detail pages to each search result, adding application performance monitoring for tracking the app performance.</p>
<p>Do feel free to contribute to the above repo or ask questions in the comments below!</p> </div> </article>  </main> <footer class="site-footer" data-astro-cid-lejjx2fa> <div class="footer-inner" data-astro-cid-lejjx2fa> <nav class="footer-nav" data-astro-cid-lejjx2fa> <a href="https://linkedin.com/in/aravindputrevu" target="_blank" rel="noopener noreferrer" data-astro-cid-lejjx2fa>LinkedIn</a> <a href="https://aravindputrevu.substack.com" target="_blank" rel="noopener noreferrer" data-astro-cid-lejjx2fa>Substack</a> <a href="https://github.com/aravindputrevu" target="_blank" rel="noopener noreferrer" data-astro-cid-lejjx2fa>GitHub</a> <a href="/archive" data-astro-cid-lejjx2fa>Archive</a> </nav> <span class="updated" data-astro-cid-lejjx2fa>Last updated January 2026</span> </div> </footer>   </body> </html> 