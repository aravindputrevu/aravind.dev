---
// Navigation component - Brutalist style
---

<nav class="navbar" aria-label="Main navigation">
  <div class="container">
    <div class="flex">
      <div>
        <a href="/" class="brand" aria-label="Aravind Putrevu - Home">
          Aravind Putrevu
        </a>
      </div>
      <div class="flex nav-links">
        <a href="/blog">Writing</a>
        <a href="/archive">Archive</a>
        <a href="/about">About</a>
        <button id="dark-mode-button" aria-label="Toggle dark mode">●</button>
      </div>
    </div>
  </div>
</nav>

<script>
  const darkModeButton = document.getElementById('dark-mode-button');

  // Load dark mode CSS helper
  function loadDarkCSS() {
    if (!document.querySelector('#dark-mode')) {
      const head = document.getElementsByTagName('head')[0];
      const link = document.createElement('link');
      link.rel = 'stylesheet';
      link.id = 'dark-mode';
      link.href = '/dark.css';
      head.appendChild(link);
    }
  }

  // Set initial state on page load
  const theme = localStorage.getItem('theme');
  if (theme === 'dark') {
    document.documentElement.classList.add('dark');
    loadDarkCSS();
    if (darkModeButton) darkModeButton.textContent = '○';
  }

  darkModeButton?.addEventListener('click', () => {
    const isDark = document.documentElement.classList.contains('dark');

    if (isDark) {
      // Switch to light mode
      document.documentElement.classList.remove('dark');
      localStorage.removeItem('theme');
      const link = document.querySelector('#dark-mode');
      link?.remove();
      darkModeButton.textContent = '●';
    } else {
      // Switch to dark mode
      document.documentElement.classList.add('dark');
      localStorage.setItem('theme', 'dark');
      loadDarkCSS();
      darkModeButton.textContent = '○';
    }
  });
</script>

<style>
  .navbar {
    border-bottom: 1px solid var(--border);
    background: var(--background);
    box-shadow: none;
  }

  .navbar .flex {
    justify-content: space-between;
  }

  .navbar a {
    text-decoration: none;
    color: var(--font-color);
  }

  .navbar a:hover {
    text-decoration: underline;
  }

  .navbar a.brand {
    font-weight: 700;
    letter-spacing: 0.02em;
  }

  .nav-links {
    gap: 1.5rem;
  }

  .nav-links a {
    font-weight: 400;
  }

  #dark-mode-button {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1rem;
    color: var(--font-color);
    padding: 0.25rem;
  }

  #dark-mode-button:hover {
    opacity: 0.7;
  }
</style>
