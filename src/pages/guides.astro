---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';

const allGuides = await getCollection('guides');

const sortedGuides = allGuides.sort((a, b) => {
  return (b.data.date?.getTime() || 0) - (a.data.date?.getTime() || 0);
});
---

<BaseLayout title="Tech Guides - Aravind Putrevu" description="Technical guides and codelabs">
  <div class="container">
    <header>
      <h1>Tech Guides</h1>
      <p class="subtitle">Technical guides and codelabs.</p>
    </header>

    <div class="posts">
      {sortedGuides.map((guide) => (
        <a href={`/${guide.slug}`} class="post">
          <h3>{guide.data.title}</h3>
          {guide.data.date && <time>{guide.data.date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</time>}
          {guide.data.tags && (
            <div class="tags">
              {guide.data.tags.map((tag) => (
                <span class="tag">{tag}</span>
              ))}
            </div>
          )}
        </a>
      ))}
    </div>
  </div>
</BaseLayout>
